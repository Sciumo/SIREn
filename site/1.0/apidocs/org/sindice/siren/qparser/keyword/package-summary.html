<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_45) on Tue Feb 11 13:10:36 GMT 2014 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>org.sindice.siren.qparser.keyword (siren-aggregator 1.0 API)</title>
<meta name="date" content="2014-02-11">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="org.sindice.siren.qparser.keyword (siren-aggregator 1.0 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/sindice/siren/qparser/json/processors/package-summary.html">Prev Package</a></li>
<li><a href="../../../../../org/sindice/siren/qparser/keyword/builders/package-summary.html">Next Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/sindice/siren/qparser/keyword/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;org.sindice.siren.qparser.keyword</h1>
<div class="docSummary">
<div class="block">A keyword query parser implemented with the Lucene's Flexible Query Parser,
 with support for twig queries.</div>
</div>
<p>See:&nbsp;<a href="#package_description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../org/sindice/siren/qparser/keyword/CharStream.html" title="interface in org.sindice.siren.qparser.keyword">CharStream</a></td>
<td class="colLast">
<div class="block">This interface describes a character stream that maintains line and
 column number positions of the characters.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../org/sindice/siren/qparser/keyword/KeywordSyntaxParserConstants.html" title="interface in org.sindice.siren.qparser.keyword">KeywordSyntaxParserConstants</a></td>
<td class="colLast">
<div class="block">Token literal values and constants.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../org/sindice/siren/qparser/keyword/KeywordQueryParser.html" title="class in org.sindice.siren.qparser.keyword">KeywordQueryParser</a></td>
<td class="colLast">
<div class="block">This class is a helper that enables to create easily a boolean of twig
 queries.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../org/sindice/siren/qparser/keyword/KeywordSyntaxParser.html" title="class in org.sindice.siren.qparser.keyword">KeywordSyntaxParser</a></td>
<td class="colLast">
<div class="block">Parser for the standard Lucene syntax.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../org/sindice/siren/qparser/keyword/KeywordSyntaxParserTokenManager.html" title="class in org.sindice.siren.qparser.keyword">KeywordSyntaxParserTokenManager</a></td>
<td class="colLast">
<div class="block">Token Manager.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../org/sindice/siren/qparser/keyword/Token.html" title="class in org.sindice.siren.qparser.keyword">Token</a></td>
<td class="colLast">
<div class="block">Describes the input token stream.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Exception Summary table, listing exceptions, and an explanation">
<caption><span>Exception Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Exception</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../org/sindice/siren/qparser/keyword/ParseException.html" title="class in org.sindice.siren.qparser.keyword">ParseException</a></td>
<td class="colLast">
<div class="block">This exception is thrown when parse errors are encountered.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Error Summary table, listing errors, and an explanation">
<caption><span>Error Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Error</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../org/sindice/siren/qparser/keyword/TokenMgrError.html" title="class in org.sindice.siren.qparser.keyword">TokenMgrError</a></td>
<td class="colLast">
<div class="block">Token Manager Error.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package_description">
<!--   -->
</a>
<h2 title="Package org.sindice.siren.qparser.keyword Description">Package org.sindice.siren.qparser.keyword Description</h2>
<div class="block">A keyword query parser implemented with the Lucene's Flexible Query Parser,
 with support for twig queries.

 <h2>Query Parser Syntax</h2>

 <p>
 A keyword Query can be either:
 <ul>
 <li>a twig (<code>twig</code>) expression that represents a <a href="../../../../../org/sindice/siren/search/node/TwigQuery.html" title="class in org.sindice.siren.search.node"><code>TwigQuery</code></a>; or
 <li>a boolean (<code>boolean</code>) expression that represents a <code>BooleanQuery</code>.
 </ul>

 The boolean expression can be a mixture of primitive queries (e.g., a keyword
 search) and of twig queries.
 <p>
 The syntax allows to use custom datatype on any part of the query.
 
 <h3>Twig</h3>

 <p>
 A twig expression is defined by the special character ':'. For example, the following

 <pre>
 a : b
 </pre>
 
 where the term "a" appears in one of the top level node (i.e., one of the
 top level field names) and the term "b" appears in one of its child node
 (i.e., one of the value of the field).
 <pre>
                             +---+
                             | a |
                             +-+-+
                               |
                             +-+-+
                             | b |
                             +---+
 </pre>
 </p>
 <p>
 In a twig query, the child clause has a
 <a href="../../../../../org/sindice/siren/search/node/NodeBooleanClause.Occur.html#MUST"><code>NodeBooleanClause.Occur.MUST</code></a>
 occurrence by default.
 </p>
 
 <p>
 Multiple children can be associated to a same top level node (i.e., one of
 the top level field names) by using a JSON-like array syntax:
 
 <pre>
 a : [ b , c ]
 </pre>
 
 where the term "a" appears in one of the top level node, the term "b"
 appears in one of its child node (i.e., one of the value of the field),
 and the term "c" appears in a second
 child node.
 <pre>
                             +---+
                             | a |
                             +-+-+
                               |
                          +----+----+
                        +-+-+     +-+-+
                        | b |     | c |
                        +---+     +---+
 </pre>
 </p>
 
 <p>
 A JSON-like object syntax is also supported. For example, the following query
 
 <pre>
 { a : b , c : d }
 </pre>
 
 allows to query for nested objects in a JSON document.
 This is a syntax sugar for
 
 <pre>* : [ a : b , c : d ]</pre>
 
 where the twigs <code>a : b</code> and <code>c : d</code> become children
 of a parent with an empty top-level node.
 <pre>
                             +---+
                             | * |
                             +-+-+
                               |
                          +----+----+
                        +-+-+     +-+-+
                        | a |     | c |
                        +---+     +---+
                          |         |
                        +-+-+     +-+-+
                        | b |     | d |
                        +---+     +---+
 </pre>
 </p>
 
 <h4>Wildcard Node</h4>
 
 <p>
 The query syntax allows to use a wildcard <code>*</code> as a node
 in the twig query. For example, a twig query node with no constraint
 on the top-level node is written as
 <pre>* : b</pre>.
 The same goes for setting no constraint on the child:
 <pre>a : *</pre>.
 A chain of wildcards can be used to set a node constraint on a specific
 descendant. The query
 <pre>a : * : * : b</pre>
 defines a twig with the term "a" occurring on the top level node,
 and the term "b" occurring on a node three levels below.
 </p>
 <p>
 Wildcards can be used with any of the previous syntaxes.
 </p>
 
 <h4>Nested Twigs</h4>
 
 <p>
 The query syntax allows you to create complex twig queries by nesting
 arrays, objects, and other twigs. For example:
 <pre>
 a : { * : b , a : [ { b : c : d } , { e : a }, g ] }
 </pre>
 correspond to the following query tree:
 <pre>
                             +---+
                             | a |
                             +-+-+
                               |
                        +------+--------+
                        |               |
                      +-+-+           +-+-+
                      | * |           | a |
                      +-+-+           +-+-+
                        |               |
                      +-+-+      +------+------+
                      | b |      |      |      |
                      +---+    +-+-+  +-+-+  +-+-+
                               | * |  | * |  | g |
                               +-+-+  +-+-+  +---+
                                 |      |
                               +-+-+  +-+-+
                               | b |  | e |
                               +-+-+  +-+-+
                                 |      |
                               +-+-+  +-+-+
                               | c |  | a |
                               +-+-+  +---+
                                 |
                               +-+-+
                               | d |
                               +---+
 </pre>
 </p>
 
 <h3>Boolean</h3>

 <p>
 A boolean expression follows the Lucene query syntax, except for the ':'
 which does not define a field query but instead is used to build a twig
 query.

 <pre>
 a AND b
 </pre>

 matches documents where the terms "a" and "b" occur in any node
 of the JSON tree.
 </p>
 
 <h4>Boolean of Twigs</h4>
 
 <p>
 A boolean combination of twig queries is also possible:
 
 <pre>
 (a : b) AND (c : d)
 </pre>
 
 matches JSON documents where both twigs occurs.
 </p>
 
 <h4>Boolean in a Twig node</h4>
 
 <p>
 The complete Lucene query syntax, e.g., grouping, boolean operators or range
 queries, can be used to match a single node of a twig. For example, the query
 
 <pre>
 a : b AND c
 </pre>
 
 matches JSON documents where the term "a" occurs on the top level node,
 and with both terms "b" and "c" occurring in a child node.
 <pre>
                             +---+
                             | a |
                             +-+-+
                               |
                          +---------+
                          | b AND c |
                          +---------+
 </pre>
 
 The twig operator ':' has priority over the boolean operators. Therefore,
 the query
 
 <pre>
 a : b AND c : d
 </pre>
 
 matches documents as in the previous query, with the additional constraint
 that a child node with an occurrence of the term "d" must be present. It is
 the same as the query
 
 <pre>
 a : (b AND c) : d
 </pre>
 
 <pre>
                             +---+
                             | a |
                             +-+-+
                               |
                          +---------+
                          | b AND c |
                          +---------+
                               |
                             +---+
                             | d |
                             +-+-+
 </pre>
 </p>
 
 <h3>Datatype</h3>
 
 <p>
 Some terms need to be analyzed in a specific way in order to be correctly
 indexed and searched, e.g., numbers. For those terms to be searchable, the
 keyword syntax provides a way to set how a query term should be analyzed.
 Using a function-like syntax:
 <pre>
 datatype( ... )
 </pre>
 any query elements inside the parenthesis are processed using the datatype.
 </p>
 <p>
 A mapping from a datatype label to an <code>Analyzer</code>
 is set thanks to configuration key
 <a href="../../../../../org/sindice/siren/qparser/keyword/config/KeywordQueryConfigHandler.KeywordConfigurationKeys.html#DATATYPES_ANALYZERS"><code>KeywordQueryConfigHandler.KeywordConfigurationKeys.DATATYPES_ANALYZERS</code></a>.
 </p>
 <p>
 For example, I can search for documents where the field contains <code>age</code>,
 and the values are integers ranging from <code>5</code> to <code>10</code>
 using the range query below:
 <pre>
 age : int( [ 5 TO 50 ] )
 </pre>
 The keyword parser in that example is configured to use
 <a href="../../../../../org/sindice/siren/analysis/IntNumericAnalyzer.html" title="class in org.sindice.siren.analysis"><code>IntNumericAnalyzer</code></a>.
 for the datatype <code>int</code>.
 </p>
 <p>
 The top level node of a twig query is by default set to use the datatype
 <a href="../../../../../org/sindice/siren/util/JSONDatatype.html#JSON_FIELD"><code>JSONDatatype.JSON_FIELD</code></a>. Any query elements
 which is not wrapped in a custom datatype uses the datatype
 <a href="../../../../../org/sindice/siren/util/XSDDatatype.html#XSD_STRING"><code>XSDDatatype.XSD_STRING</code></a>.
 </p>
 
 <h2>Query Examples</h2>

 <h3>Node query</h3>

 Match all the documents with one node containing the phrase
 "Marie Antoinette"

 <pre>
 "Marie Antoinette"
 </pre>

 <h3>Twig query</h3>

 Match all the documents with one node containing the term "genre" and with
 a child node containing the term "Drama".

 <pre>
 genre : Drama
 </pre>

 Such a twig query is the basic building block to query a particular
 field name of a JSON object. The field name is always the root of the twig
 query and the field value is defined as a child clause.
 <p>
 More complex twig queries can be constructed by using nested twig queries
 or using more than one child clause.

 <pre>
 director : { last_name : Eastwood , first_name : Clint }
 </pre>

 <h3>Boolean Query</h3>

 Node and twig queries can be combined freely.

 <pre>
 (genre : Drama) AND (year : 2010)
 </pre></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/sindice/siren/qparser/json/processors/package-summary.html">Prev Package</a></li>
<li><a href="../../../../../org/sindice/siren/qparser/keyword/builders/package-summary.html">Next Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/sindice/siren/qparser/keyword/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2014. All rights reserved.</small></p>
</body>
</html>
